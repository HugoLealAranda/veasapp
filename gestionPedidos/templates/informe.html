{% extends 'base.html' %}

{% block content %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe</title>
</head>
<body>
    <div>
        <h1>Informe correspondiente para las fechas entre {{ fecha_inicio }} y {{ fecha_fin }}</h1>
    </div>
    <button onclick="printPage()">Descargar PDF o Imprimir</button>

    <div>
        <h2>Resumen:</h2>
        <p>En este informe se presenta un resumen del balance financiero correspondiente al período entre {{ fecha_inicio }} y {{ fecha_fin }}.</p>
        <p>El balance total es de <span>{{ balance }} CLP</span>. Durante este período se emitieron un total de <span>{{ num_cotizaciones_emitidas }}</span> cotizaciones, de las cuales <span>{{ num_cotizaciones_aceptadas }}</span> fueron aceptadas y <span>{{ num_cotizaciones_rechazadas }}</span> fueron rechazadas.</p>
    </div>

    <div>
        <h2>Cotizaciones Rechazadas:</h2>
        <ul>
            {% for numero_cotizacion, comentario in cotizaciones_rechazadas %}
                <li><span>{{ numero_cotizacion }}</span> - {{ comentario }}</li>
            {% endfor %}
        </ul>
    </div>

    <div>
        <h2>Informe de Compras</h2>
        <h1>Total Compras: {{ suma_valores_totales_compras }} CLP</h1>

        <table>
            <thead>
                <tr>
                    <th>Nombre del Artículo</th>
                    <th>Cantidad</th>
                    <th>Valor Unitario</th>
                    <th>Valor Total</th>
                </tr>
            </thead>
            <tbody>
                {% for articulo in informes_compras %}
                <tr>
                    <td>{{ articulo.nombre }}</td>
                    <td>{{ articulo.cantidad }}</td>
                    <td>{{ articulo.valor_unitario }}</td>
                    <td>{{ articulo.valor_total }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div>
        <h2>Informe de Ventas</h2>
        <h1>Total Ventas: {{ suma_valores_totales_ventas }} CLP</h1>

        <table>
            <thead>
                <tr>
                    <th>Nombre del Artículo</th>
                    <th>Cantidad</th>
                    <th>Valor Unitario</th>
                    <th>Valor Total</th>
                </tr>
            </thead>
            <tbody>
                {% for articulo in informes_ventas %}
                <tr>
                    <td>{{ articulo.nombre }}</td>
                    <td>{{ articulo.cantidad }}</td>
                    <td>{{ articulo.valor_unitario }}</td>
                    <td>{{ articulo.valor_total }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>

<script>
    function printPage() {
        window.print();
    }
</script>
{% endblock %}

